---
title: Migrate to moon
---

import NextSteps from '@site/src/components/NextSteps';

Now that we've talked about the workspace, projects, tasks, and more, we must talk about something
important... Should you embrace moon tasks? Or keep using `package.json` scripts? Or both
(incremental adoption)?

## Using moon tasks

We suggest using moon tasks (of course), as they provide far more granular control and configurable
options than scripts, and a `project.yml` is a better
[source of truth](./faq#what-should-be-considered-the-source-of-truth). Scripts aren't powerful
enough to scale for large codebases.

To ease the migration process, we offer the
[`moon migrate from-package-json`](./commands/migrate/from-package-json) command, which will convert
a project's `package.json` scripts into `project.yml` tasks, while also determining project
dependencies ([`dependsOn`](./config/project#dependsOn)).

```shell
$ moon migrate from-package-json app
```

This command will do its best to parse and convert scripts, but this isn't always a simple 1:1
conversion, especially when determining dependency chains. For this reason alone, we suggest
_manually curating_ tasks!

## Using `package.json` scripts

As a frontend developer you're already familiar with the Node.js ecosystem, specifically around
defining and using `package.json` scripts, and you may not want to deviate from this. Don't worry,
simply enable the [`node.inferTasksFromScripts`](./config/workspace#infertasksfromscripts) setting
to automatically create moon tasks from a project's scripts! These can then be ran with
[`moon run`](./commands/run).

However, tasks and scripts are not 1:1 in functionality, as a task represents a single command and
its execution state, including inputs, outputs, and more. Because of this,
[there are many caveats involved when inferring tasks](./commands/migrate/from-package-json#caveats)!

Furthermore, on top of the increased overhead, relying on `package.json` scripts incurs the
following risks and disadvantages unless explicitly configured:

- [Inputs](./config/project#inputs) default to `**/*`:
  - A change to every project relative file will mark the task as affected, even those not necessary
    for the task. Granular input control is lost.
  - A change to workspace relative files _will not_ mark the task as affected. For example, a change
    to `/prettier.config.js` would not be detected for a `npm run format` script.
- [Outputs](./config/project#outputs) default to an empty list unless:
  - moon will attempt to extract outputs from arguments, by looking for variations of `--out`,
    `--outFile`, `--dist-dir`, etc.
  - If no output could be determined, builds will not be cached and hydrated.
- Tasks will always [run in CI](./config/project#runinci) unless:
  - moon will attempt to determine invalid CI tasks by looking for common command usage, for
    example: `webpack serve`, `next dev`, `--watch` usage, and more. This _is not_ an exhaustive
    check.
  - The script name contains variations of `dev`, `start`, or `serve`.

## Next steps

By this point, you should have a fully integrated and functional moon! Jump into [guides](./guides)
for advanced use cases or [concepts](./concepts) for a deeper understanding.

<NextSteps
	links={[
		{ icon: 'discord', label: 'Community help & support', url: 'https://discord.gg/qCh9MEynv2' },
		{ icon: 'twitter', label: 'Releases & updates', url: 'https://twitter.com/tothemoonrepo' },
	]}
/>
