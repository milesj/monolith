---
title: Astro example
sidebar_label: Astro
---

import AddDepsTabs from '@site/src/components/AddDepsTabs';
import CreateDepTabs from '@site/src/components/CreateDepTabs';

> Astro has been prototyped in our
> [examples repository](https://github.com/moonrepo/examples/tree/master/apps/astro-app), check it
> out!

In this guide, you'll learn how to integrate [Astro](https://docs.astro.build).

Begin by creating a new Astro project in the root of an existing moon project (this should not be
created in the workspace root, unless a polyrepo).

```shell
cd apps && npm create astro@latest
```

## Setup

Since Astro is per-project, the associated moon tasks should be defined in each project's `moon.yml`
file.

```yaml title="<project>/moon.yml"
fileGroups:
	astro:
		- 'src/**/*'
		- 'astro.config.*'

tasks:
	astro:
		command: 'astro'
		local: true

	# Development server
	dev:
		command: 'astro dev'
		inputs:
			- '@group(astro)'
		local: true

	# Production build
	build:
		command: 'astro build'
		inputs:
			- '@group(astro)'
		outputs:
			- 'dist'

	# Check .astro files
	check:
		command: 'astro'
		args: 'check'
		inputs:
			- '@group(astro)'

	# Preview production build locally
	preview:
		command: 'astro preview'
		inputs:
			- '@group(astro)'
		deps:
			- '~:build'
		local: true
```

## Configuration

### Root-level

We suggest _against_ root-level configuration, as Astro should be installed per-project, and the
`astro` command expects the configuration to live relative to the project root.

### Project-level

When creating a new Astro project, a
[`astro.config.mjs`](https://docs.astro.build/en/reference/configuration-reference/) is created, and
_must_ exist in the project root. This allows each project to configure Astro for their needs.

```js title="<project>/astro.config.mjs"
import { defineConfig } from 'astro/config';

// https://astro.build/config
export default defineConfig({});
```
